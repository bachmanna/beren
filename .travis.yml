dist: xenial
language: python
cache: pip
notifications:
  email: false
python:
    - '3.7'
    - '3.6'
    - '3.5'
    - '3.4'
install:
    - pip install -r dev-requirements.txt
script:
    - pytest
stages:
    - lint
    - test
    - deploy
jobs:
  include:
      - stage: lint
        install:
            - pip install black
        script:
            - black --check orthanc_rest_client tests
      - stage: deploy
        deploy:
            - provider: pypi
              user: teffalump
              password:
                secure: "ookkR2iddYDA0VfuekP1bWigoA1B2M6RldGHntDVz68htwFbsjQnUEhwFMfQZhZqjSilcb7tEdRhSA3Og+4cbKfecyZsj6/McHUG+SymJC1rkXpnNzcya162urNNIWD0kBqw1P+Qd5vWBxM+DLeT7AUWp67VpB2EqvN3iKsh60DfQbQ2FEV0WQoMFdFkCDbL7jdXiHj+gsh2/BM/UPdpVN01eVLh/uWAZK+MM/fp2d2FmEzBpuztZkwrxJ6e/fqHTvQz+MyVrrIxc2nmmB6JhFfKnaEJzL+erdyWEVZ2hIoXueHCAY6PS6AB32DSpPrcIKi1325dy2yv5MHqbFed7IsZen4igOTY/FxjXdZMxtXgHzRMdb5KfwASb6TWggYJWH+v4m4Df9ZdQdtq4k+X/Scq1svlECogeaR4z7nhqt7j+5Rui4ge9gTrKsyvqm6Ih9FKFqubdJBye8lghpmXkNBoxM5v7KSa3dDx5AafApYihydXF1TxxfaXvitRWPNM6OBr//zDkBsiQ30+DNtzAEpP8JvTEduIBqHMabcOWRmN2c8DE6I3Xl3N0b1Z1d4hp3wcg5OVbODXvMg5mx2w2TwGXu+xjUPbHJqLwe2MIgGS6mUXo2EZzuMqwIShgoV0aeN6l3kQWxmKNtEzyM2JFf2MESUq5lIoXDoa0mlxs/A="
              distributions: "sdist bdist_wheel"
              skip_cleanup: true
              skip_existing: true
              on:
                repo: teffalump/orthanc_rest_client
                branch: master
                tags: true
                python: "3.7"
